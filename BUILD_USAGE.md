# XpuMusic æ„å»ºç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•çš„æ„å»ºæ–¹å¼
```cmd
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
xpu_build.bat
```

### æµ‹è¯•éŸ³é¢‘æ’­æ”¾
```cmd
# æ’­æ”¾æµ‹è¯•éŸ³é¢‘æ–‡ä»¶
build\bin\Debug\final_wav_player.exe 1khz.wav
```

## ğŸ“‹ å¯ç”¨çš„æ„å»ºå‘½ä»¤

### ä¸»è¦æ„å»ºè„šæœ¬

| å‘½ä»¤ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `xpu_build.bat` | å¿«é€Ÿæ„å»º | æ„å»ºä¸»è¦çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ¨èï¼‰ |
| `xpu_build.bat full` | å®Œæ•´æ„å»º | æ„å»ºæ‰€æœ‰å·¥ä½œç»„ä»¶ |
| `xpu_build.bat clean` | æ¸…ç†é‡å»º | å¼ºåˆ¶é‡æ–°æ„å»ºmusic-player |
| `xpu_build.bat fix` | ä¿®å¤æ„å»º | è§£å†³CMakeä¾èµ–é—®é¢˜ |
| `xpu_build.bat music` | ä»…éŸ³ä¹æ’­æ”¾å™¨ | åªæ„å»ºmusic-player.exe |
| `xpu_build.bat wav` | ä»…WAVæ’­æ”¾å™¨ | åªæ„å»ºfinal_wav_player.exe |

### ä¼ ç»Ÿæ„å»ºè„šæœ¬

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `quick_build.bat` | å¿«é€Ÿæ„å»ºä¸»è¦å¯æ‰§è¡Œæ–‡ä»¶ |
| `build_all.bat` | å®Œæ•´æ„å»ºæ‰€æœ‰ç»„ä»¶ |
| `fix_cmake_generation.bat` | ä¿®å¤CMakeä¾èµ–æ£€æµ‹é—®é¢˜ |
| `rebuild_music_player.bat` | å¼ºåˆ¶é‡æ–°ç”Ÿæˆmusic-player.exe |

## ğŸ“ æ„å»ºè¾“å‡º

æ„å»ºå®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äºï¼š
```
D:\workspaces\foobar\XpuMusic\build\bin\Debug\
```

**ä¸»è¦æ–‡ä»¶ï¼š**
- âœ… `music-player.exe` (161KB) - ä¸»éŸ³ä¹æ’­æ”¾å™¨
- âœ… `final_wav_player.exe` (150KB) - WAVæ–‡ä»¶æ’­æ”¾å™¨ï¼ˆå·²éªŒè¯å·¥ä½œï¼‰
- âœ… `test_decoders.exe` (63KB) - è§£ç å™¨æµ‹è¯•ç¨‹åº
- âœ… `test_audio_direct.exe` (76KB) - éŸ³é¢‘ç³»ç»Ÿæµ‹è¯•

**éŸ³é¢‘æ’ä»¶ï¼š**
- âœ… `plugin_flac_decoder.dll` - FLACæ ¼å¼æ”¯æŒ
- âœ… `plugin_mp3_decoder.dll` - MP3æ ¼å¼æ”¯æŒ
- âœ… `plugin_wav_decoder.dll` - WAVæ ¼å¼æ”¯æŒ

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬æ’­æ”¾æµ‹è¯•
```cmd
# æ’­æ”¾1kHzæµ‹è¯•éŸ³é¢‘ï¼ˆ30ç§’ï¼‰
build\bin\Debug\final_wav_player.exe 1khz.wav

# æ’­æ”¾å…¶ä»–WAVæ–‡ä»¶
build\bin\Debug\final_wav_player.exe your_audio_file.wav
```

### æµ‹è¯•éŸ³é¢‘ç³»ç»Ÿ
```cmd
# æµ‹è¯•éŸ³é¢‘è¾“å‡º
build\bin\Debug\test_audio_direct.exe

# æµ‹è¯•è§£ç å™¨
build\bin\Debug\test_decoders.exe
```

### ä½¿ç”¨ä¸»æ’­æ”¾å™¨
```cmd
# è¿è¡Œä¸»éŸ³ä¹æ’­æ”¾å™¨
build\bin\Debug\music-player.exe
```

## ğŸ”§ æ•…éšœæ’é™¤

### CMakeè·¯å¾„é”™è¯¯
**é”™è¯¯ï¼š** `Error: not a CMake build directory (missing CMakeCache.txt)`
**è§£å†³ï¼š** ä½¿ç”¨æä¾›çš„æ„å»ºè„šæœ¬ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æ­£ç¡®ç›®å½•

### æ–‡ä»¶ä¸é‡æ–°ç”Ÿæˆ
**é—®é¢˜ï¼š** ä¿®æ”¹ä»£ç åæ–‡ä»¶ä¸é‡æ–°ç¼–è¯‘
**è§£å†³ï¼š** ä½¿ç”¨ `xpu_build.bat fix` æˆ– `fix_cmake_generation.bat`

### æ„å»ºå¤±è´¥
**é—®é¢˜ï¼š** æŸäº›ç›®æ ‡æ„å»ºå¤±è´¥
**è§£å†³ï¼š** åªæ„å»ºå·¥ä½œç»„ä»¶ï¼Œä½¿ç”¨ `xpu_build.bat quick`

## ğŸ’¡ å¼€å‘å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘å¾ªç¯
```cmd
# 1. ä¿®æ”¹ä»£ç 
# 2. å¿«é€Ÿæ„å»º
xpu_build.bat

# 3. æµ‹è¯•
build\bin\Debug\final_wav_player.exe test_file.wav
```

### å®Œæ•´æµ‹è¯•
```cmd
# å®Œæ•´æ„å»º
xpu_build.bat full

# æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
build\bin\Debug\test_audio_direct.exe
build\bin\Debug\test_decoders.exe
```

## ğŸ“Š æ„å»ºç³»ç»Ÿç‰¹ç‚¹

### âœ… å·²è§£å†³çš„é—®é¢˜
- **è·¯å¾„é—®é¢˜ï¼š** è„šæœ¬è‡ªåŠ¨åˆ‡æ¢åˆ°æ­£ç¡®ç›®å½•
- **ä¾èµ–é—®é¢˜ï¼š** ä¿®å¤CMakeä¾èµ–æ£€æµ‹
- **è¿”å›é—®é¢˜ï¼š** è¿è¡Œå®Œåè¿”å›åŸå§‹ç›®å½•
- **é€‰æ‹©æ€§æ„å»ºï¼š** æ”¯æŒå•ç‹¬æ„å»ºç‰¹å®šç›®æ ‡

### âš¡ æ€§èƒ½ä¼˜åŒ–
- **å¢é‡æ„å»ºï¼š** åªé‡æ–°ç¼–è¯‘ä¿®æ”¹çš„æ–‡ä»¶
- **å¹¶è¡Œæ„å»ºï¼š** æ”¯æŒå¤šæ ¸ç¼–è¯‘
- **ç¼“å­˜ä¼˜åŒ–ï¼š** æ™ºèƒ½ä¾èµ–æ£€æµ‹

## ğŸµ éŸ³é¢‘ç³»ç»ŸéªŒè¯

### å·²éªŒè¯åŠŸèƒ½
- âœ… WAVæ–‡ä»¶æ’­æ”¾ï¼ˆ44.1kHz â†’ 48kHzè‡ªåŠ¨è½¬æ¢ï¼‰
- âœ… å®æ—¶éŸ³é¢‘æµå¤„ç†
- âœ… å¤šæ ¼å¼éŸ³é¢‘è§£ç ï¼ˆWAVã€MP3ã€FLACï¼‰
- âœ… ä½å»¶è¿ŸéŸ³é¢‘è¾“å‡º
- âœ… è®¾å¤‡æšä¸¾å’Œé€‰æ‹©

### æµ‹è¯•æ–‡ä»¶
é¡¹ç›®ç›®å½•ä¸­åŒ…å«å¤šä¸ªæµ‹è¯•éŸ³é¢‘æ–‡ä»¶ï¼š
- `1khz.wav` - 1kHzæ­£å¼¦æ³¢ï¼Œ30ç§’
- `test_440hz.wav` - 440Hzæµ‹è¯•éŸ³
- `input_*.wav` - ä¸åŒé‡‡æ ·ç‡çš„æµ‹è¯•æ–‡ä»¶

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### æ‰‹åŠ¨CMakeå‘½ä»¤
å¦‚æœéœ€è¦æ‰‹åŠ¨æ§åˆ¶ï¼š
```cmd
# åˆ‡æ¢åˆ°æ„å»ºç›®å½•
cd D:\workspaces\foobar\XpuMusic\build

# æ„å»ºç‰¹å®šç›®æ ‡
cmake --build . --config Debug --target music-player

# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..
```

### æ¸…ç†å’Œé‡æ–°é…ç½®
```cmd
# æ¸…ç†æ„å»ºç›®å½•
rmdir /s /q build
mkdir build
cd build

# é‡æ–°é…ç½®CMake
cmake -S .. -B . -G "Visual Studio 17 2022" -A x64

# æ„å»º
cmake --build . --config Debug
```

## ğŸ“ æ”¯æŒ

æ„å»ºç³»ç»Ÿå®Œå…¨å°±ç»ªï¼å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. ä½¿ç”¨ `xpu_build.bat fix` ä¿®å¤ä¾èµ–é—®é¢˜
2. æ£€æŸ¥æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œè„šæœ¬
3. éªŒè¯Visual Studio 2022å’ŒCMakeå·²æ­£ç¡®å®‰è£…

**äº«å—éŸ³ä¹æ’­æ”¾ï¼** ğŸ¶