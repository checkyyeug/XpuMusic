# foobar2000 兼容播放器开发计划

## 项目目标
创建一个可以加载和使用 foobar2000 插件的独立音频播放器。

## 当前项目优势
1. 已有完整的 SDK 兼容层 (`compat/`)
2. 已实现核心音频引擎
3. 支持插件架构
4. 跨平台支持

## 开发阶段

### Phase 1: 插件加载器（1-2周）
- [ ] 实现插件扫描和加载
- [ ] 支持 .dll 插件文件
- [ ] 插件接口验证

### Phase 2: 核心服务实现（2-3周）
- [ ] 实现 playback_control
- [ ] 实现 metadb 数据库
- [ ] 实现 playlist_manager

### Phase 3: 输入插件支持（2-3周）
- [ ] 通用输入插件接口
- [ ] 支持常见格式（MP3, FLAC, AAC）
- [ ] 元数据读取

### Phase 4: DSP 和输出插件（2周）
- [ ] DSP 链支持
- [ ] 多种输出插件支持

### Phase 5: UI 和播放列表（可选）
- [ ] 基础播放列表
- [ ] 播放控制

## 技术实现

### 1. 插件加载策略
```cpp
// 优先级：新SDK实现 → 原版DLL → 兼容层
if (load_new_sdk()) {
    use_new_sdk();
} else if (load_original_fb2k()) {
    use_fb2k_dll();
} else {
    use_compatibility_layer();
}
```

### 2. 核心服务架构
```
┌─────────────────┐
│   Player UI     │
├─────────────────┤
│ Playback Ctrl   │
├─────────────────┤
│    Metadb       │
├─────────────────┤
│  Input Plugins  │
├─────────────────┤
│   DSP Plugins   │
├─────────────────┤
│ Output Plugins  │
├─────────────────┤
│  Audio Engine   │
└─────────────────┘
```

## 法律和版权注意事项
1. 不要打包原版 foobar2000.dll
2. 明确说明这是兼容层实现
3. 开源发布
4. 避免抄袭 UI 设计

## 成功指标
- [ ] 可以加载至少 50% 的常用 foobar2000 插件
- [ ] 支持主流音频格式
- [ ] 播放质量与原版相当
- [ ] 跨平台运行