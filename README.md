# XpuMusic - Professional Music Player

ä¸€ä¸ªè·¨å¹³å°çš„ä¸“ä¸šéŸ³ä¹æ’­æ”¾å™¨ï¼Œæ”¯æŒ foobar2000 æ’ä»¶å…¼å®¹æ€§ã€‚

## é¡¹ç›®æ¦‚è¿°

XpuMusic æ˜¯ä¸€ä¸ªåŸºäº C++ çš„æ¨¡å—åŒ–éŸ³ä¹æ’­æ”¾å™¨é¡¹ç›®ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ğŸµ **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒ MP3ã€FLACã€OGG/Vorbis ç­‰ä¸»æµéŸ³é¢‘æ ¼å¼
- ğŸ”Œ **æ’ä»¶ç³»ç»Ÿ**ï¼šå®Œæ•´çš„æ’ä»¶æ¶æ„ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½å’Œçƒ­é‡è½½
- ğŸŒ **è·¨å¹³å°**ï¼šæ”¯æŒ Linuxã€Windowsã€macOS
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„æ¨¡å—åˆ†ç¦»ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- ğŸ›ï¸ **Foobar2000 å…¼å®¹**ï¼šæ”¯æŒ foobar2000 æ’ä»¶ç”Ÿæ€

## æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶

```
XpuMusic
â”œâ”€â”€ core/                    # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ core_engine         # ä¸»å¼•æ“
â”‚   â”œâ”€â”€ service_registry     # æœåŠ¡æ³¨å†Œè¡¨
â”‚   â”œâ”€â”€ event_bus          # äº‹ä»¶æ€»çº¿
â”‚   â”œâ”€â”€ plugin_host        # æ’ä»¶å®¿ä¸»
â”‚   â”œâ”€â”€ config_manager     # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ playlist_manager   # æ’­æ”¾åˆ—è¡¨ç®¡ç†
â”‚   â”œâ”€â”€ playback_engine    # æ’­æ”¾å¼•æ“
â”‚   â””â”€â”€ visualization_engine # å¯è§†åŒ–å¼•æ“
â”‚
â”œâ”€â”€ plugins/decoders/        # éŸ³é¢‘è§£ç å™¨
â”‚   â”œâ”€â”€ mp3_decoder       # MP3 è§£ç å™¨ï¼ˆminimp3ï¼‰
â”‚   â”œâ”€â”€ flac_decoder      # FLAC è§£ç å™¨ï¼ˆlibFLACï¼‰
â”‚   â””â”€â”€ ogg_vorbis_decoder # OGG/Vorbis è§£ç å™¨
â”‚
â”œâ”€â”€ platform/              # å¹³å°æŠ½è±¡å±‚
â”‚   â””â”€â”€ audio_output_factory # éŸ³é¢‘è¾“å‡ºå·¥å‚
â”‚
â”œâ”€â”€ compat/               # å…¼å®¹æ€§å±‚
â”‚   â”œâ”€â”€ plugin_loader/     # æ’ä»¶åŠ è½½å™¨
â”‚   â”œâ”€â”€ sdk_implementations # SDK å®ç°
â”‚   â””â”€â”€ foobar_sdk/       # Foobar2000 SDK
â”‚
â””â”€â”€ src/                  # åº”ç”¨ç¨‹åº
    â”œâ”€â”€ music_player_simple.cpp
    â””â”€â”€ music_player_plugin.cpp
```

## æ„å»ºç³»ç»Ÿ

### ä¾èµ–é¡¹

- **CMake** 3.20 æˆ–æ›´é«˜ç‰ˆæœ¬
- **C++17** æ ‡å‡†
- **C** è¯­è¨€æ”¯æŒï¼ˆminimp3ï¼‰
- **çº¿ç¨‹åº“**ï¼ˆpthreadï¼‰

### å¯é€‰ä¾èµ–

- **libFLAC** - FLAC è§£ç æ”¯æŒ
- **libvorbis** - OGG/Vorbis è§£ç æ”¯æŒ
- **ALSA** - Linux éŸ³é¢‘è¾“å‡º

### æ„å»ºæ­¥éª¤

```bash
# åˆ›å»ºæ„å»ºç›®å½•
mkdir build
cd build

# é…ç½®é¡¹ç›®
cmake ..

# æ„å»ºæ‰€æœ‰ç›®æ ‡
make

# æˆ–æ„å»ºç‰¹å®šç›®æ ‡
make music-player
make music-player-plugin
```

## ä½¿ç”¨è¯´æ˜

### åŸºç¡€éŸ³ä¹æ’­æ”¾å™¨

```bash
./bin/music-player <audio_file>
```

### æ’ä»¶æ„ŸçŸ¥çš„éŸ³ä¹æ’­æ”¾å™¨

```bash
# åŸºæœ¬ç”¨æ³•
./bin/music-player-plugin <audio_file>

# åŠ è½½æ’ä»¶ç›®å½•
./bin/music-player-plugin -p /path/to/plugins <audio_file>

# è®¾ç½®è¾“å‡ºé‡‡æ ·ç‡
./bin/music-player-plugin -r 48000 <audio_file>

# è®¾ç½®é‡é‡‡æ ·è´¨é‡
./bin/music-player-plugin -q high <audio_file>

# ä½¿ç”¨è‡ªé€‚åº”é‡é‡‡æ ·
./bin/music-player-plugin -a <audio_file>

# åˆ—å‡ºæ”¯æŒçš„æ ¼å¼
./bin/music-player-plugin --list-formats

# æ˜¾ç¤ºæ’ä»¶ä¿¡æ¯
./bin-player-plugin --plugin-info
```

### æµ‹è¯•å·¥å…·

```bash
# éŸ³é¢‘è§£ç å™¨æµ‹è¯•
./bin/audio_decoder_test <audio_file>

# WAV æ’­æ”¾å™¨æµ‹è¯•
./bin/final_wav_player <audio_file>

# é‡‡æ ·ç‡è½¬æ¢æµ‹è¯•
./bin/test-resampler
./bin/test-universal-converter

# è·¨å¹³å°æµ‹è¯•
./bin/test_cross_platform
```

## åŠŸèƒ½ç‰¹æ€§

### å·²å®ç°åŠŸèƒ½

- âœ… WAV æ–‡ä»¶æ’­æ”¾
- âœ… MP3 è§£ç æ”¯æŒï¼ˆminimp3ï¼‰
- âœ… FLAC è§£ç æ¶æ„ï¼ˆéœ€è¦ libFLACï¼‰
- âœ… OGG/Vorbis è§£ç æ¶æ„ï¼ˆéœ€è¦ libvorbisï¼‰
- âœ… éŸ³é¢‘æ ¼å¼è‡ªåŠ¨æ£€æµ‹
- âœ… æ’­æ”¾åˆ—è¡¨ç®¡ç†
- âœ… è¿›åº¦æ˜¾ç¤º
- âœ… é‡‡æ ·ç‡è½¬æ¢
- âœ… æ’ä»¶ç³»ç»Ÿæ¡†æ¶
- âœ… Foobar2000 å…¼å®¹å±‚

### æ’ä»¶ç³»ç»Ÿ

- åŠ¨æ€æ’ä»¶åŠ è½½
- æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
- çƒ­é‡è½½æ”¯æŒ
- ä¾èµ–å…³ç³»ç®¡ç†
- ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„éŸ³é¢‘è§£ç å™¨

1. åœ¨ `plugins/decoders/` ç›®å½•åˆ›å»ºæ–°çš„è§£ç å™¨æ–‡ä»¶
2. å®ç° `IAudioDecoder` æ¥å£
3. åœ¨ `CMakeLists.txt` ä¸­æ·»åŠ æ„å»ºç›®æ ‡
4. åœ¨ `AudioDecoderRegistry` ä¸­æ³¨å†Œè§£ç å™¨

### å¼€å‘æ’ä»¶

1. ç»§æ‰¿ `IPlugin` æ¥å£
2. å®ç°å¿…è¦çš„æ–¹æ³•
3. å¯¼å‡ºæ’ä»¶å‡½æ•°
4. ä½¿ç”¨ `MP_DEFINE_PLUGIN` å®å®šä¹‰

## é¡¹ç›®å†å²

### v0.3.0 (2025-12-10)
- å®Œæ•´çš„æ’ä»¶ç³»ç»Ÿå®ç°
- music-player-plugin æˆåŠŸæ„å»º
- æ‰€æœ‰ç¼–è¯‘å’Œé“¾æ¥é”™è¯¯ä¿®å¤

### v0.2.0
- éŸ³é¢‘è§£ç å™¨æ ¸å¿ƒå®ç°
- MP3 è§£ç å™¨é›†æˆ
- åŸºç¡€æ’­æ”¾åŠŸèƒ½

### v0.1.0
- é¡¹ç›®åˆå§‹åŒ–
- æ ¸å¿ƒæ¶æ„è®¾è®¡
- åŸºç¡€ WAV æ’­æ”¾

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- åˆ›å»º GitHub Issue
- å‘é€é‚®ä»¶è‡³é¡¹ç›®ç»´æŠ¤è€…

---

**æ³¨æ„**ï¼šè¿™æ˜¯ä¸€ä¸ªæ­£åœ¨å¼€å‘ä¸­çš„é¡¹ç›®ï¼ŒæŸäº›åŠŸèƒ½å¯èƒ½è¿˜åœ¨å®Œå–„ä¸­ã€‚