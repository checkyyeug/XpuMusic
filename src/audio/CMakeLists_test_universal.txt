# CMakeLists.txt for Universal Sample Rate Converter Test
cmake_minimum_required(VERSION 3.16)
project(UniversalConverterTest)

# Set C++ standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Include directories
include_directories(${CMAKE_CURRENT_SOURCE_DIR})

# Source files
set(UNIVERSAL_CONVERTER_SOURCES
    universal_sample_rate_converter.cpp
    universal_sample_rate_converter.h
    sample_rate_converter.cpp
    sample_rate_converter.h
    wav_writer.cpp
    wav_writer.h
    test_universal_converter.cpp
)

# Create test executable
add_executable(test-universal-converter ${UNIVERSAL_CONVERTER_SOURCES})

# Link math library for Linux
if(UNIX AND NOT APPLE)
    target_link_libraries(test-universal-converter m)
endif()

# Compiler-specific options
if(MSVC)
    target_compile_options(test-universal-converter PRIVATE /W4)
else()
    target_compile_options(test-universal-converter PRIVATE -Wall -Wextra -O2)
endif()

# Set output directory
set_target_properties(test-universal-converter PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin
)